<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WeatherNow ‚Äì Portfolio Weather App</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:system-ui, sans-serif; }

    body {
      min-height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      padding:20px;
      transition:background 0.6s ease, color 0.4s ease;
      background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
      color:#fff;
    }

    body.clear { background: linear-gradient(135deg,#56ccf2,#2f80ed); }
    body.clouds { background: linear-gradient(135deg,#757f9a,#d7dde8); color:#111; }
    body.rain { background: linear-gradient(135deg,#314755,#26a0da); }
    body.snow { background: linear-gradient(135deg,#83a4d4,#b6fbff); color:#111; }
    body.thunderstorm { background: linear-gradient(135deg,#232526,#414345); }
    body.light { color:#111; }

    .container {
      width:100%; max-width:1000px;
      background:rgba(255,255,255,0.15);
      backdrop-filter:blur(14px);
      border-radius:20px;
      padding:40px;
      box-shadow:0 30px 60px rgba(0,0,0,.35);
    }

    header { display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:15px; }
    h1 { font-size:38px; }

    .controls { display:flex; gap:10px; flex-wrap:wrap; }

    button {
      padding:14px 18px;
      border-radius:10px;
      border:none;
      cursor:pointer;
      font-weight:600;
      background:#ff9800;
      color:#000;
    }

    .search { display:flex; gap:15px; margin:25px 0; flex-wrap:wrap; }

    input {
      flex:1;
      padding:16px;
      font-size:18px;
      border-radius:10px;
      border:none;
      outline:none;
    }

    .weather { display:none; margin-top:20px; }
    .current { display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:20px; }
    .temp { font-size:64px; font-weight:700; }

    .grid {
      margin-top:25px;
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
      gap:15px;
    }

    .card {
      background:rgba(255,255,255,0.25);
      border-radius:14px;
      padding:18px;
      text-align:center;
    }

    .forecast {
      margin-top:30px;
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(120px,1fr));
      gap:15px;
    }

    .forecast div {
      background:rgba(255,255,255,0.25);
      border-radius:14px;
      padding:14px;
      text-align:center;
      font-size:14px;
    }

    .loading,.error { text-align:center; margin-top:20px; }
    footer { margin-top:40px; text-align:center; font-size:14px; opacity:.75; }

    @media(max-width:600px){ .temp{font-size:48px;} }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>WeatherNow</h1>
      <div class="controls">
        <button onclick="getLocation()">üìç My Location</button>
        <button onclick="toggleUnit()">¬∞C / ¬∞F</button>
      </div>
    </header>

    <p>Portfolio-ready weather app with dynamic backgrounds & forecasts</p>

    <div class="search">
      <input id="cityInput" placeholder="Enter city name" />
      <button onclick="getWeather()">Search</button>
    </div>

    <div class="loading" id="loading">Loading weather data...</div>
    <div class="error" id="error">City not found</div>

    <section class="weather" id="weather">
      <div class="current">
        <div>
          <h2 id="city">‚Äî</h2>
          <p id="desc">‚Äî</p>
        </div>
        <div class="temp" id="temp">‚Äî¬∞C</div>
      </div>

      <div class="grid">
        <div class="card">Feels Like<br><strong id="feels">‚Äî</strong></div>
        <div class="card">Humidity<br><strong id="humidity">‚Äî</strong></div>
        <div class="card">Wind<br><strong id="wind">‚Äî</strong></div>
        <div class="card">Pressure<br><strong id="pressure">‚Äî</strong></div>
        <div class="card">Visibility<br><strong id="visibility">‚Äî</strong></div>
      </div>

      <h3 style="margin-top:30px">5-Day Forecast</h3>
      <div class="forecast" id="forecast"></div>
    </section>

    <footer>Built with HTML, CSS, JavaScript & OpenWeather API</footer>
  </div>

  <script>
    const API = "e3583a21890964e4d0e73b8415fe887a";
    let unit = 'metric';
    let lastCity = '';

    const loading = document.getElementById('loading');
    const error = document.getElementById('error');
    const weather = document.getElementById('weather');

    function toggleUnit(){
      unit = unit === 'metric' ? 'imperial' : 'metric';
      if(lastCity) getWeather(lastCity);
    }

    function setBackground(type){
      document.body.className = type.toLowerCase();
    }

    async function getWeather(city){
      city = city || document.getElementById('cityInput').value.trim();
      if(!city) return;
      lastCity = city;

      loading.style.display='block'; error.style.display='none'; weather.style.display='none';

      try{
        const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&units=${unit}&appid=${API}`);
        if(!res.ok) throw Error();
        const d = await res.json();

        setBackground(d.weather[0].main);

        const symbol = unit === 'metric' ? '¬∞C' : '¬∞F';

        document.getElementById('city').textContent = `${d.name}, ${d.sys.country}`;
        document.getElementById('desc').textContent = d.weather[0].description;
        document.getElementById('temp').textContent = `${Math.round(d.main.temp)}${symbol}`;
        document.getElementById('feels').textContent = `${Math.round(d.main.feels_like)}${symbol}`;
        document.getElementById('humidity').textContent = d.main.humidity+'%';
        document.getElementById('wind').textContent = d.wind.speed + (unit==='metric'?' m/s':' mph');
        document.getElementById('pressure').textContent = d.main.pressure+' hPa';
        document.getElementById('visibility').textContent = (d.visibility/1000).toFixed(1)+' km';

        getForecast(d.coord.lat, d.coord.lon);
        loading.style.display='none'; weather.style.display='block';
      }catch{
        loading.style.display='none'; error.style.display='block';
      }
    }

    async function getForecast(lat, lon){
      const res = await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&units=${unit}&appid=${API}`);
      const data = await res.json();
      const box = document.getElementById('forecast');
      box.innerHTML='';

      data.list.filter((_,i)=>i%8===0).slice(0,5).forEach(d=>{
        const el = document.createElement('div');
        el.innerHTML = `${new Date(d.dt_txt).toDateString().slice(0,3)}<br>${Math.round(d.main.temp)}${unit==='metric'?'¬∞C':'¬∞F'}<br>${d.weather[0].main}`;
        box.appendChild(el);
      });
    }

    function getLocation(){
      navigator.geolocation.getCurrentPosition(pos=>{
        const {latitude, longitude} = pos.coords;
        fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&units=${unit}&appid=${API}`)
          .then(r=>r.json()).then(d=>getWeather(d.name));
      });
    }
  </script>
</body>
</html>
